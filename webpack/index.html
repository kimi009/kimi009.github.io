<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack | kimi 博客</title>
    <meta name="description" content="kimi的踩坑记录">
    <link rel="stylesheet" href="/assets/style.c3210e46.css">
    <link rel="modulepreload" href="/assets/app.87eb6f1c.js">
    <link rel="modulepreload" href="/assets/webpack_index.md.a9577f90.lean.js">
    
    <link rel="icon" href="/1.png">
  <meta name="keywords" content="vitepress kimi">
  <meta name="twitter:title" content="webpack | kimi 博客">
  <meta property="og:title" content="webpack | kimi 博客">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="kimi 博客, back to home" data-v-675d8756 data-v-cc01ef16><!----> kimi 博客</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>前端基础</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/ts/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Typescript</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/html/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>HTML</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/js/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>JS</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/css/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>CSS</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/web/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>web</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/canvas/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>canvas</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>前端框架</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/vue2/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Vue2</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/vue3/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Vue3</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/react/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>React</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/Nuxt/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Nuxt</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/microFront/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>microFront</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/thirdLib/" data-v-b8818f8c>第三方库 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>工程化</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/vite/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>vite</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/monorepo/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>monorepo</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/webpack/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Webpack</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/husky/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>husky</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/prettier/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>prettier</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/editorconfig/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>editorconfig</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/npm/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>npm</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/pnpm/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>pnpm</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/roolup/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>roolup</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/esbuild/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>esbuild</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/eslint/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>eslint</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/vscode/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>vscode</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>运维</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/git/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>git</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/nginx/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>nginx</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/jenkins/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>jenkins</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/docker/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>docker</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/pm2/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>pm2</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/linux/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>linux</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>后端</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/nodejs/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>nodejs</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/nest/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>nest</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/python/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>python</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>数据库</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/mysql/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>mysql</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/mongodb/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>mongodb</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>前端基础</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/ts/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Typescript</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/html/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>HTML</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/js/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>JS</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/css/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>CSS</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/web/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>web</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/canvas/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>canvas</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>前端框架</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/vue2/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Vue2</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/vue3/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Vue3</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/react/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>React</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/Nuxt/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Nuxt</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/microFront/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>microFront</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/thirdLib/" data-v-b8818f8c>第三方库 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>工程化</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/vite/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>vite</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/monorepo/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>monorepo</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/webpack/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Webpack</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/husky/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>husky</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/prettier/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>prettier</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/editorconfig/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>editorconfig</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/npm/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>npm</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/pnpm/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>pnpm</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/roolup/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>roolup</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/esbuild/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>esbuild</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/eslint/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>eslint</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/vscode/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>vscode</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>运维</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/git/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>git</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/nginx/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>nginx</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/jenkins/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>jenkins</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/docker/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>docker</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/pm2/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>pm2</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/linux/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>linux</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>后端</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/nodejs/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>nodejs</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/nest/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>nest</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/python/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>python</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>数据库</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/mysql/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>mysql</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/mongodb/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>mongodb</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/index">webpack</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/plugin">plugin</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="webpack" tabindex="-1">webpack <a class="header-anchor" href="#webpack" aria-hidden="true">#</a></h1><p><a href="https://juejin.cn/post/7019603442083561508" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7019603442083561508</a></p><p><code>下面涉及到process_env_NODE_ENV都下划线原来是点，因为vitepress识别有问题</code></p><h2 id="一、基本配置" tabindex="-1">一、基本配置 <a class="header-anchor" href="#一、基本配置" aria-hidden="true">#</a></h2><div class="language-js"><pre><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].[contenthash].js&#39;</span><span class="token punctuation">,</span>
		<span class="token comment">//打包后的文件是否加前缀</span>
		<span class="token comment">// publicPath: &#39;/a&#39;,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>查看 webpack 打包后的内容，可以通过 rm-js-comment 这个插件</p><h3 id="loader-只是转换成-webapck-可以认识的-js" tabindex="-1">loader 只是转换成 webapck 可以认识的 js <a class="header-anchor" href="#loader-只是转换成-webapck-可以认识的-js" aria-hidden="true">#</a></h3><p>执行顺是从下往上，或者从右往左</p><div class="language-js"><pre><code>	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">//rules是一个数组</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;raw-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="plugin-是增强-webpack-，插件其实都是类" tabindex="-1">plugin 是增强 webpack ，插件其实都是类 <a class="header-anchor" href="#plugin-是增强-webpack-，插件其实都是类" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
<span class="token comment">//自动将打包后的文件添加到index.html里面</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].[contenthash].js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;./index.html&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">//现在会把打包后的文件加到head里面,里面defer不能去掉，否则影响加载速度，加上不会阻塞页面的加载时异步</span>
<span class="token comment">//&lt;script defer src=&quot;xxx.js&quot;&gt;&lt;/script&gt;</span>
</code></pre></div><h3 id="mode-模式" tabindex="-1">mode 模式 <a class="header-anchor" href="#mode-模式" aria-hidden="true">#</a></h3><p><strong>development：</strong> 会将 process_env_NODE_ENV 设置为 development，会启用 NamedChunksPlugin、 NamedModulesPlugin, named 就是打包后的文件里面会出现以文件名路径为 key 的对象</p><p><strong>production：</strong> 会将 process_env_NODE_ENV 设置为 production， 同时会启用 FlagDependencyUsagePlugin、FlagIncludedChunkedPlugin、 ModuleConcatenationPlugin、 NoEmitOnErrorsPlugin、 OccurrenceOrderPlugin、 SideEffectsFlagPlugin、 UglifyJsPlugin</p><h3 id="env" tabindex="-1">env <a class="header-anchor" href="#env" aria-hidden="true">#</a></h3><p>配置环境变量的方式</p><ul><li><p>--mode=development 这种模式只能在代码里拿到，编译的时候可以，但是在 webpack.config.js 里面是拿不到的</p></li><li><p>--env=development 此时的 webpack.config.js 就要导出一个函数</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> 之前的webpakc配置对象
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>DefinePlugin 设置全局变量，所有模块都能读取到,但是配置文件拿不到 就是模块内部变量替换，是 webpack 上的插件</p><div class="language-js"><pre><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string-property property">&#39;process_env_NODE_ENV&#39;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">Stringify</span><span class="token punctuation">(</span><span class="token string">&#39;development&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>cross-env 跨平台设置环境变量</p><div class="language-js"><pre><code>cross<span class="token operator">-</span>env <span class="token constant">NODE_ENV</span><span class="token operator">=</span>production
</code></pre></div></li></ul><h3 id="dotenv" tabindex="-1">dotenv <a class="header-anchor" href="#dotenv" aria-hidden="true">#</a></h3><blockquote><p>npm install dotenv</p></blockquote><ul><li>在项目根目录创建.env 文件，文件内容如下</li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> dotEnv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;dotenv&#39;</span><span class="token punctuation">)</span>
dotEnv<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;.env&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// console.log(process.<wbr>env.TEST_NAME)</span>
</code></pre></div><h2 id="二、开发环境配置" tabindex="-1">二、开发环境配置 <a class="header-anchor" href="#二、开发环境配置" aria-hidden="true">#</a></h2><h3 id="_2-1-开发服务器" tabindex="-1">2.1 开发服务器 <a class="header-anchor" href="#_2-1-开发服务器" aria-hidden="true">#</a></h3><h4 id="_2-1-1-安装服务器" tabindex="-1">2.1.1 安装服务器 <a class="header-anchor" href="#_2-1-1-安装服务器" aria-hidden="true">#</a></h4><div class="language-js"><pre><code>npm install webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server <span class="token operator">-</span><span class="token constant">D</span>
</code></pre></div><h4 id="_2-1-2-webpack-config-js-配置" tabindex="-1">2.1.2 webpack.config.js 配置 <a class="header-anchor" href="#_2-1-2-webpack-config-js-配置" aria-hidden="true">#</a></h4><div class="language-js"><pre><code>	<span class="token comment">//通过express启动一个http服务器，通过它可以访问产出的文件</span>
	<span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">//标识打包生产的静态文件的目录，如果这个没有配置默认会取output里面的publicPath</span>
		<span class="token comment">// publicPath:&#39;&#39;,</span>
		<span class="token comment">//提供额外静态文件内容的目录，类似于开启了静态文件服务器</span>
		<span class="token literal-property property">contentBase</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;public&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token comment">//是否启用压缩</span>
		<span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span>
		<span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_2-2-支持-css" tabindex="-1">2.2 支持 css <a class="header-anchor" href="#_2-2-支持-css" aria-hidden="true">#</a></h3><ul><li>css-loader 翻译处理@import 和 url()</li><li>style-loader 将 css 插入到 dom 中</li></ul><h4 id="_2-2-1-安装模块" tabindex="-1">2.2.1 安装模块 <a class="header-anchor" href="#_2-2-1-安装模块" aria-hidden="true">#</a></h4><div class="language-js"><pre><code>npm install css<span class="token operator">-</span>loader style<span class="token operator">-</span>loader <span class="token operator">-</span><span class="token constant">D</span>
</code></pre></div><h4 id="_2-2-2-处理-css" tabindex="-1">2.2.2 处理 css <a class="header-anchor" href="#_2-2-2-处理-css" aria-hidden="true">#</a></h4><div class="language-js"><pre><code><span class="token punctuation">{</span>
	<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token comment">//css转成js</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">importLoaders</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string">&#39;postcss-loader&#39;</span><span class="token punctuation">,</span> <span class="token comment">//css预处理器，处理前缀问题</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="_2-2-3-处理-less-scss" tabindex="-1">2.2.3 处理 less scss <a class="header-anchor" href="#_2-2-3-处理-less-scss" aria-hidden="true">#</a></h4><blockquote><p>npm install less less-loader sass sass-loader -D</p></blockquote><div class="language-js"><pre><code><span class="token punctuation">{</span>
	<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token comment">//css转成js</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">importLoaders</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
	<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token comment">//css转成js</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">importLoaders</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string">&#39;sass-loader&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_2-4-支持图片" tabindex="-1">2.4 支持图片 <a class="header-anchor" href="#_2-4-支持图片" aria-hidden="true">#</a></h3><h4 id="_2-4-1-安装" tabindex="-1">2.4.1 安装 <a class="header-anchor" href="#_2-4-1-安装" aria-hidden="true">#</a></h4><blockquote><p>file-loader 解决 css 等文件中引入图片的路劲问题</p><p>url-loader：当图片小于 limit 的时候转成 base64 ,大于的时候通过 file-loader 进行 copy</p></blockquote><blockquote><p>npm install file-loader url-loader html-loader -D</p></blockquote><div class="language-js"><pre><code><span class="token punctuation">{</span>
	<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|bmp|svg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;url-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">esModule</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
				<span class="token comment">//这个意思是require到的图片是个module 此时还有default才能取到，为了不取所以写成false</span>
				<span class="token comment">//const img = require(&#39;/public/1.png&#39;);</span>
				<span class="token comment">// console.log(img);</span>
				<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;[hash:10].[ext]&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
        <span class="token comment">// outputPath:&#39;images&#39;,</span>
        <span class="token comment">// publicPath:&#39;/images&#39;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_2-5-css-兼容性处理" tabindex="-1">2.5 css 兼容性处理 <a class="header-anchor" href="#_2-5-css-兼容性处理" aria-hidden="true">#</a></h3><h4 id="_2-5-1-安装" tabindex="-1">2.5.1 安装 <a class="header-anchor" href="#_2-5-1-安装" aria-hidden="true">#</a></h4><blockquote><p>npm i postcss-loader postcss-preset-env -D</p></blockquote><h4 id="_2-5-2-配置-postcss-config-js" tabindex="-1">2.5.2 配置 postcss.config.js <a class="header-anchor" href="#_2-5-2-配置-postcss-config-js" aria-hidden="true">#</a></h4><div class="language-css"><pre><code><span class="token selector">没配置前 #postcss</span> <span class="token punctuation">{</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> #0f0<span class="token punctuation">;</span>
	<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">const</span> postCssPresetEnv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;postcss-preset-env&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token function">postCssPresetEnv</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">browsers</span><span class="token operator">:</span> <span class="token string">&#39;last 10 version&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>配置了上面的兼容性处理器后回转化为下面的代码，多了浏览器兼容性处理</p><div class="language-css"><pre><code>    <span class="token property">background-color</span><span class="token punctuation">:</span> #0f0<span class="token punctuation">;</span>
    <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">-ms-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-6-importloaders" tabindex="-1">2.6 importloaders <a class="header-anchor" href="#_2-6-importloaders" aria-hidden="true">#</a></h3><p>在处理引入模块之前先要经过几个 loader 的处理，就是从当前开始，需要执行几个 laoder</p><p><strong>如果是 css-loader 必须是 1，但是 less 和 scss 是不需要的，因为他本身就已经处理了这个 import</strong></p><p><strong>less-loader 只是帮我们处理 import 语法，但是 url 还是需要 url-loader 的</strong></p><h3 id="_2-7-js-兼容性" tabindex="-1">2.7 js 兼容性 <a class="header-anchor" href="#_2-7-js-兼容性" aria-hidden="true">#</a></h3><h4 id="_2-7-1-概要" tabindex="-1">2.7.1 概要 <a class="header-anchor" href="#_2-7-1-概要" aria-hidden="true">#</a></h4><p>babel 可以实现对代码的转换，</p><p>主要是靠 loader,但是它只是一个函数，具体的转换还要靠 babel/core</p><p>但是具体怎么转换还是要靠插件来配合处理 ，由于 es6 插件很多，所以就把插件打一个包，就叫预设</p><p>比如@babel/preset-env 就是把 es6 转成 es5 的一个预设</p><p>预设可以理解为套餐，插件可以理解为额外的一些小菜</p><h4 id="_2-7-2-安装" tabindex="-1">2.7.2 安装 <a class="header-anchor" href="#_2-7-2-安装" aria-hidden="true">#</a></h4><blockquote><p>npm i babel-loader @babel/core @babel/preset-env @babel/preset-react -D npm i @babel/plugin-proposal-decorators @babel/plugin-proposal-class-properties -D</p></blockquote><ul><li>babel-loader 使用 babel 和 webpack 转义 js 文件</li><li>@babel/core 是 babel 的核心包</li><li>@babel/preset-env babel 的预设</li><li>@babel/plugin-proposal-decorators 把类和对象装饰器编译成 es5</li><li>@babel/plugin-proposal-class-properties 转换静态类属性以及使用属性初始化语法声明的属性</li></ul><h4 id="_2-7-3-配置-webpack-config-js" tabindex="-1">2.7.3 配置 webpack.config.js <a class="header-anchor" href="#_2-7-3-配置-webpack-config-js" aria-hidden="true">#</a></h4><div class="language-js"><pre><code>  <span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">[</span><span class="token string">&#39;@babel/plugin-proposal-decorators&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">legacy</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span><span class="token string">&#39;@babel/plugin-proposal-class-properties&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">loose</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="language-js"><pre><code><span class="token comment">/**
 *
 * @param {*} target
 * @param {*} key
 * @param {*} decriptor
 */</span>
<span class="token keyword">function</span> <span class="token function">readonly</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> decriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	decriptor<span class="token punctuation">.</span>writable <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
	@readonly <span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">3.14</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
c1<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span>
</code></pre></div><p>上面的代码可能会有警告需要配饰 jsconfig.json</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
	<span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;experimentalDecorators&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-8-eslint" tabindex="-1">2.8 ESLint <a class="header-anchor" href="#_2-8-eslint" aria-hidden="true">#</a></h3><h4 id="_2-8-1-概要" tabindex="-1">2.8.1 概要 <a class="header-anchor" href="#_2-8-1-概要" aria-hidden="true">#</a></h4><p><a href="https://eslint.org/docs/rules/no-tabs#disallow-all-tabs-no-tabs" target="_blank" rel="noopener noreferrer">eslint 相关文档</a></p><blockquote><p>npm i eslint eslint-loader babel-eslint -D</p><p><strong>可以借助公认的 airbnb</strong></p></blockquote><ul><li><p>eslint-config-airbnb，查看这个的使用方法</p></li><li><p>直接通过 npx install-peerdeps --dev eslint-config-airbnb 可以安装正确的版本</p></li><li><p>在项目根目录新建.vscode 目录，里面加 settings.json 文件</p></li></ul><div class="language-json"><pre><code><span class="token punctuation">{</span>
	<span class="token property">&quot;eslint.validate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;javascriptreact&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;typescript&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;typescriptreact&quot;</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;editor.codeActionsOnSave&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;source.fixAll.esint&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//保存文件自动修复错误</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-8-2-配置-eslintrc-js" tabindex="-1">2.8.2 配置 eslintrc.js <a class="header-anchor" href="#_2-8-2-配置-eslintrc-js" aria-hidden="true">#</a></h4><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// root: true, //根配置，配置文件可以有继承关系</span>
	<span class="token keyword">extends</span><span class="token operator">:</span> <span class="token string">&#39;airbnb&#39;</span><span class="token punctuation">,</span> <span class="token comment">//是继承或是扩展自aribnb的配置，是业内公认的</span>
	<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&#39;babel-eslint&#39;</span><span class="token punctuation">,</span> <span class="token comment">//把源代码转成ast语法树</span>
	<span class="token comment">// parserOptions: {</span>
	<span class="token comment">// 	sourceType: &#39;module&#39;,</span>
	<span class="token comment">// 	ecmaVersion: 2015,</span>
	<span class="token comment">// },</span>
	<span class="token comment">//指定脚本运行环境</span>
	<span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// indent: &#39;off&#39;, //缩进分格</span>
		<span class="token comment">// quotes: &#39;off&#39;, //单引号</span>
		<span class="token comment">// &#39;no-console&#39;: &#39;error&#39;, //不能出现console.log</span>
		<span class="token string-property property">&#39;linebreak-style&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span> <span class="token comment">//关闭换行符设置</span>
		<span class="token string-property property">&#39;no-console&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&#39;no-tabs&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">allowIndentationTabs</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string-property property">&#39;no-param-reassign&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
				<span class="token literal-property property">ignorePropertyModificationsFor</span><span class="token operator">:</span> <span class="token punctuation">[</span>
					<span class="token string">&#39;decriptor&#39;</span><span class="token punctuation">,</span> <span class="token comment">//一般是不允许修改函数传入的参数，如果有特殊的可以加在这里</span>
					<span class="token string">&#39;e&#39;</span><span class="token punctuation">,</span> <span class="token comment">// for e.returnvalue</span>
					<span class="token string">&#39;ctx&#39;</span><span class="token punctuation">,</span> <span class="token comment">// for Koa routing</span>
					<span class="token string">&#39;req&#39;</span><span class="token punctuation">,</span> <span class="token comment">// for Express requests</span>
					<span class="token string">&#39;request&#39;</span><span class="token punctuation">,</span> <span class="token comment">// for Express requests</span>
					<span class="token string">&#39;res&#39;</span><span class="token punctuation">,</span> <span class="token comment">// for Express responses</span>
					<span class="token string">&#39;response&#39;</span><span class="token punctuation">,</span> <span class="token comment">// for Express responses</span>
					<span class="token string">&#39;state&#39;</span><span class="token punctuation">,</span> <span class="token comment">// for vuex state</span>
				<span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//关于函数参数配置问题</span>
		<span class="token literal-property property">indent</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-8-3-配置-webpack-config-js" tabindex="-1">2.8.3 配置 webpack.config.js <a class="header-anchor" href="#_2-8-3-配置-webpack-config-js" aria-hidden="true">#</a></h4><p>这个要有限与 js 的 loader 的处理，因为肯定是有限校验文件，之后才走 loader</p><div class="language-js"><pre><code>  <span class="token punctuation">{</span>
	<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;eslint-loader&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token string">&#39;pre&#39;</span><span class="token punctuation">,</span> <span class="token comment">//loader分类  pre(前置，所以这个loader肯定要放最前面)-&gt;normal（普通）-&gt;inline（行内）-&gt;post（后置）</span>
	<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">fix</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//如果发现不符合要求会自动进行修复</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_2-9-sourcemap" tabindex="-1">2.9 sourcemap <a class="header-anchor" href="#_2-9-sourcemap" aria-hidden="true">#</a></h3><h4 id="_2-9-1-概要" tabindex="-1">2.9.1 概要 <a class="header-anchor" href="#_2-9-1-概要" aria-hidden="true">#</a></h4><p>看似很多配置，但是其实就是五个关键字 eval 、 source-map、 cheap、module、inline</p><ul><li>eval 使用 eval 包裹模块代码，其实是为了方便缓存</li><li>source-map 产生.map 文件 <strong>行映射，列映射（点击错误信息会定位到具体的列）、bable 映射</strong></li><li>cheap 不包含列信息 也不包含 loader 的 sourcemap，只有行映射</li><li>module 包含 loader 的 sourcemap 比如 jsx to js ，babel 的 sourcemap 否则无法定义源文件</li><li>inline 将.map 作为 DataURI 嵌入 不单独生成.map 文件</li></ul><p><strong>不管怎么样他们的顺序是不会变的[inline-| hidden- | eval][nosources-][cheap-[module]]source-map</strong></p><ul><li>source-map 单独在外部生成完整的 sourcemap 文件，并且在目标文件里面建立关联，能提示错误代码的准确原始位置</li><li>inline-source-map 以 base64 格式内联在打包文件中，内联构建速度更快，也能提示错误代码的准确原始位置</li><li>hidden-source-map 会在外部生成 sourcemap 文件，但是在目标文件里面么有建立关联，不能提示错误代码的准确原始位置</li><li>eval-source-map 会为每一个模块生成一个单独的 sourcemap 文件, 并使用 eval 执行</li><li>nosource-source-map 也会在外部生成 sourcemap 文件 能找到源代码位置，但源代码内容为空</li><li>cheap-source-map 外部生成 sourcemap 文件 不包含列和 loader 的 map</li><li>cheap-module-source-map 外部生成 sourcemap 文件，不包含列的信息但是包含 loader 的 map 信息</li></ul><p>webpack.config.js</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//false就是不生成任何map</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-9-2-最佳实践" tabindex="-1">2.9.2 最佳实践 <a class="header-anchor" href="#_2-9-2-最佳实践" aria-hidden="true">#</a></h4><ul><li><p>开发环境</p><ul><li>我们在开发的时候肯定是要求速度快，调试友好</li><li>速度快 eval-cheap-source-map</li><li>调试友好 cheap-module-source-map</li><li><strong>折中选择就是 eval-source-amp</strong></li></ul></li><li><p>生产环境</p><ul><li>首先排除内联，因为一方面我们要隐藏源代码，另一方面要减少文件体积</li><li>要调试友好 sourcemap &gt; cheap-source-map &gt;cheap-module-source-map &gt; hidden-source-map/nosources-source-map</li><li>要想速度快，优先排除 cheap</li><li><strong>折中选择就是 hidden-source-map</strong><strong>线上环境怎么调试呢？</strong> 1、开启 enable-javascript-source-map 2、add source map webpack.config.js</li></ul><div class="language-js"><pre><code><span class="token operator">...</span>
<span class="token literal-property property">devtool</span><span class="token operator">:</span> hidden<span class="token operator">-</span>source<span class="token operator">-</span>map
<span class="token operator">...</span>
<span class="token keyword">new</span> <span class="token class-name">FileManagerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">events</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token literal-property property">onEnd</span><span class="token operator">:</span><span class="token punctuation">{</span>
              <span class="token literal-property property">copy</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
                  <span class="token literal-property property">source</span><span class="token operator">:</span><span class="token string">&#39;./dist/*.map&#39;</span><span class="token punctuation">,</span>
                  <span class="token literal-property property">destination</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;maps&#39;</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token keyword">delete</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;./dist/*.map&#39;</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>测试环境</p><ul><li>source-map-dev-tool-plugin</li><li>filemanager-webpack-plugin 这个是只有你本地才有的，别人没有，只有你自己启动 http-server 开启服务才可以调试</li></ul></li></ul><div class="language-js"><pre><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token keyword">new</span> <span class="token class-name">wepack<span class="token punctuation">.</span>SourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[file].map&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">append</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\n//# sourceMappingURL=http://127.0.0.1:8080/[url]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token keyword">new</span> <span class="token class-name">FileManagerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">events</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">onEnd</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">copy</span><span class="token operator">:</span> <span class="token punctuation">[</span>
					<span class="token punctuation">{</span>
						<span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token string">&#39;./dist/*.map&#39;</span><span class="token punctuation">,</span>
						<span class="token literal-property property">destination</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;maps&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token keyword">delete</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;./dist/*.map&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="_2-10-打包第三方类库" tabindex="-1">2.10 打包第三方类库 <a class="header-anchor" href="#_2-10-打包第三方类库" aria-hidden="true">#</a></h3><h4 id="_2-10-1-直接引入" tabindex="-1">2.10.1 直接引入 <a class="header-anchor" href="#_2-10-1-直接引入" aria-hidden="true">#</a></h4><div class="language-js"><pre><code><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#39;lodash&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;c&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39;$&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-10-2-插件引入" tabindex="-1">2.10.2 插件引入 <a class="header-anchor" href="#_2-10-2-插件引入" aria-hidden="true">#</a></h4><ul><li>webpack 配置 ProvidePlugin，在使用的时候不再需要 import 和 require 进行引入，直接使用即可</li><li>_ 函数会自动添加到当前模块上下文，无需显示声明 webpack.config.js</li></ul><div class="language-js"><pre><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token operator">...</span><span class="token comment">//会为每个模块自动注入_,但是不会挂到window上面的</span>
	<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">_</span><span class="token operator">:</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="_2-10-3-expose-loader" tabindex="-1">2.10.3 expose-loader <a class="header-anchor" href="#_2-10-3-expose-loader" aria-hidden="true">#</a></h4><ul><li>可以把模块添加到全局对象上 webpack.config.js</li></ul><div class="language-js"><pre><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">lodash</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;expose-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">exposes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">globalName</span><span class="token operator">:</span> <span class="token string">&#39;__&#39;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">override</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//如果全局有的话就重写</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-10-4-extrnals" tabindex="-1">2.10.4 extrnals <a class="header-anchor" href="#_2-10-4-extrnals" aria-hidden="true">#</a></h4><p>webpack.config.js</p><div class="language-js"><pre><code><span class="token comment">//外部依赖-&gt;  模块名:全局变量</span>
<span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token string">&#39;jQuery&#39;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-11-watch" tabindex="-1">2.11 watch <a class="header-anchor" href="#_2-11-watch" aria-hidden="true">#</a></h3><p>就是运行 npm run build 的时候不会退出，编译完后就会等待继续，开发中基本用不到</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token literal-property property">watchOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">ignored</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">aggregateTimeout</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token comment">//防抖</span>
		<span class="token literal-property property">poll</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">//判断文件是否发生变化是通过不停的询问文件系统是否有变化</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-12-服务器代理" tabindex="-1">2.12 服务器代理 <a class="header-anchor" href="#_2-12-服务器代理" aria-hidden="true">#</a></h3><blockquote><p>可以自己通过 express 起个服务测试即可</p></blockquote><div class="language-js"><pre><code>webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server内部就是启动了一个express服务器
<span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token comment">// proxy:{</span>
  <span class="token comment">//   &quot;/api&quot;: {</span>
  <span class="token comment">//     target:&#39;http://localhost:3000&#39;,</span>
  <span class="token comment">//     pathRewrite:{&quot;^/api&quot;,&quot;&quot;} //http://localhost:8080/api/users ==&gt; http://localhost:8080/users</span>
  <span class="token comment">//   }</span>
  <span class="token comment">// }</span>
  <span class="token comment">// 方案二</span>
  <span class="token function">before</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">rescode</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-13-webpack-dev-middleware" tabindex="-1">2.13 webpack-dev-middleware <a class="header-anchor" href="#_2-13-webpack-dev-middleware" aria-hidden="true">#</a></h3><blockquote><p>npm i webpack-dev-middleware -D</p></blockquote><p>express 中间件</p><h2 id="三、生产环境" tabindex="-1">三、生产环境 <a class="header-anchor" href="#三、生产环境" aria-hidden="true">#</a></h2><h3 id="_3-1-提取-css" tabindex="-1">3.1 提取 css <a class="header-anchor" href="#_3-1-提取-css" aria-hidden="true">#</a></h3><ul><li>因为 css 的下载和 js 可以并行，当 html 文件大的时候，可以把 css 单独提取出来</li></ul><h4 id="_3-1-1-安装" tabindex="-1">3.1.1 安装 <a class="header-anchor" href="#_3-1-1-安装" aria-hidden="true">#</a></h4><ul><li>npm i mini-css-extract-plugin -D</li><li>去掉 style-loader 变成 MiniCssExtractPlugin.loader webpack.config.js</li></ul><div class="language-js"><pre><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].css&#39;</span><span class="token punctuation">,</span> <span class="token comment">//默认是放在dist下</span>
		<span class="token comment">// filename:&#39;css/[name].css&#39;//默认是放在dist/css下</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="_3-1-2-hash" tabindex="-1">3.1.2 hash <a class="header-anchor" href="#_3-1-2-hash" aria-hidden="true">#</a></h4><ul><li>ext 资源后缀名</li><li>name 文件名称</li><li>path 文件的相对路径</li><li>folder 文件所在的文件夹</li><li>hash 每次 webpack 构建时生成一个唯一的 hash 值 [hash:8].js</li><li>chunkhash 根据 chunk 生成 hash 值，来源于同一个 chunk 则 hash 值是一样的 [chunkhash:8].js</li><li>contenthash 根据内容生成 hash 文件内容相同则 hash 值就相同 [contenthash:16].js</li></ul></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><!----></div><div class="next" data-v-38ede35f><a class="link" href="/webpack/plugin" data-v-38ede35f><span class="text" data-v-38ede35f>plugin</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"nuxt_nuxt2.md\":\"d463e646\",\"nuxt_index.md\":\"4f34438f\",\"canvas_index.md\":\"32920643\",\"canvas_node-canvas.md\":\"db1a1efe\",\"canvas_文档转化为图片.md\":\"3c36eb73\",\"css_dropanddown.md\":\"f1772373\",\"css_flex布局.md\":\"19542b83\",\"css_grid布局.md\":\"a485ff28\",\"css_index.md\":\"98026b49\",\"css_interview.md\":\"6a7d0154\",\"css_scrollreveal.md\":\"b6fafc9b\",\"css_windicss.md\":\"b9208700\",\"css_大屏响应式布局.md\":\"1e12d8a1\",\"css_省略号.md\":\"2e60eb37\",\"docker_container.md\":\"c63de16e\",\"docker_index.md\":\"b432d4b4\",\"editorconfig_editorconfig配置.md\":\"fa85a524\",\"editorconfig_index.md\":\"cbb6fcd3\",\"esbuild_esbuild.md\":\"69156e4e\",\"esbuild_index.md\":\"c2099c4a\",\"eslint_eslint.md\":\"838da2fc\",\"eslint_index.md\":\"7df72470\",\"git_gitsubmodule.md\":\"3a55fa27\",\"git_gitsubtree.md\":\"ed4fa05e\",\"git_index.md\":\"7ea229b9\",\"git_打补丁.md\":\"80dd8bfb\",\"html_index.md\":\"4ed67439\",\"html_interview.md\":\"8ee28bde\",\"html_test.md\":\"33eb6b66\",\"html_重绘回流.md\":\"dd97593b\",\"husky_index.md\":\"08c24489\",\"index.md\":\"8d3c8f01\",\"jenkins_centos_jenkins.md\":\"9215576b\",\"jenkins_dockerinstalljenkins.md\":\"3536b0c9\",\"jenkins_index.md\":\"8bdd9a40\",\"js_v8 垃圾回收机制.md\":\"0f67aecd\",\"js_arrowfn.md\":\"ae29a348\",\"js_compose函数.md\":\"62689fec\",\"js_cookie.md\":\"97b9d874\",\"js_debounce.md\":\"bc3adff4\",\"js_designpatterns.md\":\"9e83fde0\",\"js_eventbus.md\":\"f0149237\",\"js_generator演变.md\":\"f5b5e750\",\"js_index.md\":\"ddc50abf\",\"js_interview.md\":\"eec027cf\",\"js_jslib.md\":\"1e007352\",\"js_js加载方式.md\":\"d749f59f\",\"js_package.json详解.md\":\"199d6868\",\"js_promise.md\":\"23128dda\",\"js_reg.md\":\"1b488088\",\"js_throttle.md\":\"43caf14e\",\"js_url.md\":\"b7ecc4da\",\"js_位运算.md\":\"fca75e42\",\"js_删除树节点.md\":\"52f33167\",\"js_原型链.md\":\"8108338e\",\"js_复制粘贴.md\":\"d69d7522\",\"js_拷贝.md\":\"ef17f313\",\"js_文件切片上传下载.md\":\"66344dc5\",\"js_最长递增子序列.md\":\"1c570fd8\",\"js_树转化.md\":\"c3d73d7b\",\"js_深度广度遍历.md\":\"e63bab51\",\"js_虚拟滚动.md\":\"07efa53d\",\"js_面试一.md\":\"dc294a6e\",\"linux_centos.md\":\"31923fb1\",\"linux_index.md\":\"ca8daa9c\",\"microfront_index.md\":\"5ffad8af\",\"microfront_microfront.md\":\"a245801c\",\"microfront_qiankun.md\":\"b6993df1\",\"microfront_systemjs.md\":\"98cbb6fd\",\"microfront_webcomponent容器.md\":\"1e5c9eb2\",\"microfront_无界微前端.md\":\"d203d477\",\"mongodb_index.md\":\"63ffde2c\",\"monorepo_index.md\":\"a3f50165\",\"monorepo_vite.md\":\"6c3ed3a1\",\"mysql_index.md\":\"fe3a341d\",\"nest_bcrypt加盐加密包.md\":\"23135b4a\",\"nest_index.md\":\"35ca61de\",\"nest_微信扫码登录.md\":\"9cb1a8f0\",\"nest_管道.md\":\"b52007d0\",\"nest_身份认证.md\":\"fe745fb7\",\"network_http.md\":\"a6eb945a\",\"network_index.md\":\"39a02814\",\"nginx_index.md\":\"893f149c\",\"nodejs_buffer.md\":\"ca652dfd\",\"nodejs_fs.md\":\"fbe9e59c\",\"nodejs_index.md\":\"76f134b8\",\"nodejs_node-excel.md\":\"505715b5\",\"nodejs_node-gyp.md\":\"e0e8fe54\",\"nodejs_前端鉴权.md\":\"d4ac6831\",\"npm_index.md\":\"875785df\",\"npm_npmrc.md\":\"a2e36c39\",\"npm_npm全局包link.md\":\"e5080819\",\"npm_npm第三方包汇总.md\":\"813337ce\",\"pm2_index.md\":\"db4e6b5e\",\"pnpm_index.md\":\"87da3023\",\"pnpm_pnpm.md\":\"046f8bf9\",\"prettier_index.md\":\"ec26d2fd\",\"python_beautifulsoup.md\":\"fa8a778d\",\"python_csv.md\":\"a5b743ef\",\"python_index.md\":\"d6b4b5e9\",\"python_pandas.md\":\"56225d78\",\"python_python.md\":\"1e25c277\",\"python_数据清洗.md\":\"55ed3af1\",\"react_index.md\":\"55379861\",\"roolup_index.md\":\"106c79ce\",\"roolup_roolup.md\":\"0768ddff\",\"thirdlib_index.md\":\"fe88a283\",\"thirdlib_moment.md\":\"69ba839f\",\"thirdlib_nodejs 操作华为obs.md\":\"1d184eec\",\"tools_index.md\":\"fd3ff5d6\",\"ts_index.md\":\"4e779474\",\"ts_infer.md\":\"2a3adbf3\",\"ts_infer学习.md\":\"d1ef3aa8\",\"ts_tsconfig配置文件.md\":\"b95b9efa\",\"ts_ts中extend奇技淫巧.md\":\"ceff01f1\",\"ts_ts注释问题.md\":\"01cdafd0\",\"ts_webpackts.md\":\"b54e23dd\",\"ts_装饰器.md\":\"7fede647\",\"vite_index.md\":\"9b63648a\",\"vite_vite配置.md\":\"10e00a82\",\"vite_构建工具.md\":\"b4bfeac5\",\"vscode_index.md\":\"f0fe79b8\",\"vscode_vscode本地调试vue代码.md\":\"db77e503\",\"vscode_插件样例.md\":\"3c71b5e1\",\"vscode_自定义插件.md\":\"324a6efe\",\"vue2_communication.md\":\"9f60d206\",\"vue2_diff算法.md\":\"fb2172e5\",\"vue2_index.md\":\"d75df714\",\"vue2_interview.md\":\"ddf3ce67\",\"vue2_jsx.md\":\"210fd957\",\"vue2_nexttick原理.md\":\"1f6f4ac2\",\"vue2_provide-inject使用.md\":\"04458e58\",\"vue2_vue代码片段.md\":\"bc3c67a3\",\"vue2_watch_computed.md\":\"e099c387\",\"vue2_双向数据绑定.md\":\"11fd644a\",\"vue3_suspense.md\":\"ecbb3412\",\"vue3_compositionapi.md\":\"8e187761\",\"vue3_defineemits.md\":\"5c31961b\",\"vue3_defineprops.md\":\"50185c64\",\"vue3_index.md\":\"9c8c196f\",\"vue3_reactive.md\":\"b2cfa629\",\"vue3_vmodel.md\":\"adfd5503\",\"vue3_vue3代码片段.md\":\"04ee495a\",\"vue3_vue3学习图谱.md\":\"0cb303d2\",\"web_qps.md\":\"2ee0ef5b\",\"web_index.md\":\"bfdcb44b\",\"web_代理服务器搭建.md\":\"13d66c33\",\"web_性能优化.md\":\"50fabba8\",\"webpack_index.md\":\"a9577f90\",\"webpack_plugin.md\":\"392c92d7\"}")</script>
    <script type="module" async src="/assets/app.87eb6f1c.js"></script>
    
  </body>
</html>